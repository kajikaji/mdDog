[% INCLUDE header.tmpl %]
[% INCLUDE apptitle.tmpl %]
[% INCLUDE userinfo.tmpl %]
[% INCLUDE error.tmpl %]

<ul class="back-nav">
<li><a href="index.cgi">ファイル一覧に戻る</a></li>
</ul>

<h2>[% file_name %]</h2>
<div class="description">
<span class="download-link"><a href="download.cgi?fid=[% fid %]">最新版DL</a></span>
<h3>更新履歴</h3>
</div>

[% IF login %]
<form action="?fid=[% fid %]" method="post" id="docx-upload" class="" enctype="multipart/form-data">
  <div>docxファイル：<input type="file" name="docxfile"></div>
  <div>詳細：<input type="text" size="100" name="detail"></div>
  <div>
    <input type="submit" name="upload" value="アップロード">
    <input type="hidden" name="fid" value="[% fid %]">
  </div>
</form>
[% END %]
<table class="gitlog">
<thead>
  <tr>
    <th class="date">更新年月日</th>
    <th class="message">詳細</th>
    <th class="author">更新者</th>
    <th class="ctrl">操作</th>
  </tr>
</thead>
<tbody>
[% FOREACH log IN loglist %]
  <tr class="[% IF log.local %]user-branch[% ELSE %]master[% END %]">
    <td class="date">[% log.attr.date %]</td>
    <td class="message">[% log.message %]</td>
    <td class="author">[% log.attr.author %]</td>
    <td class="ctrl">
        <span class="download-link"><a href="download.cgi?fid=[% fid %]&revision=[% log.id %]">download</a></span>
        [% UNLESS loop.last %]
          <br><span class="diff"*><a href="filediff.cgi?fid=[% fid %]&revision=[% log.id %]">差分</a></spa>
        [% END %]
        [% IF log.local %]
          <br><span class="master-diff"*><a href="filediff.cgi?fid=[% fid %]&revision=[% log.id %]&dist=master">共有との差分</a></spa>
        [% END %]
    </td>
  </tr>
[% END %]
</tbody>
</table>

</body>
</html>
